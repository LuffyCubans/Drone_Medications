{% extends 'layout.html' %}

{% block body %}

<div class="container pt-4">
  {% with messages = get_flashed_messages() %}
  {% if messages %}
  {% for message in messages %}
  <div class="alert alert-success alert-dismissible fade show" role="alert">
    <strong>Perfect</strong> {{ message }} ...
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  {% endfor %}
  {% endif %}
  {% endwith %}
</div>


<div class="card card-body d-grid gap-6 col-6 mx-auto">
  <form action="/register_drone" method="post" class="form-floating">
    <div class="container">
      <p>
        <h2 class="text-center">Register Drone</h2>
      </p>
      
      <div class="mb-3">
        <label for="serial_number" class="form-label">Serial Number:</label>
        <input type="text" class="form-control" id="serial_number" name="serial_number" placeholder="Serial Number"
          required>
      </div>
  
      <div class="form-floating mb-3">
        <select class="form-select" id="model" name="model" required>
          <option selected>Select Drone Model</option>
          <option value="Lightweight">Lightweight</option>
          <option value="Middleweight">Middleweight</option>
          <option value="Cruiserweight">Cruiserweight</option>
          <option value="Heavyweight">Heavyweight</option>
        </select>
        <label for="model"></label>
      </div>
  
      <div class="mb-3">
        <label for="weight_limit" class="form-label">Weight Limit:</label>
        <input type="number" class="form-control" id="weight_limit" name="weight_limit" placeholder="Weight Limit"
          required>
      </div>
  
      <div class="mb-3">
        <label for="battery_capacity" class="form-label">Battery Capacity:</label>
        <input type="number" class="form-control" id="battery_capacity" name="battery_capacity"
          placeholder="Battery Capacity" required>
      </div>
  
      <div class="form-floating mb-3">
        <select class="form-select" id="state" name="state" aria-label="state" required>
          <option selected>Select Drone State</option>
          <option value="IDLE">IDLE</option>
          <option value="LOADING">LOADING</option>
          <option value="LOADED">LOADED</option>
          <option value="DELIVERING">DELIVERING</option>
          <option value="DELIVERED">DELIVERED</option>
          <option value="RETURNING">RETURNING</option>
        </select>
        <label for="state"></label>
      </div>
  
      <center>
        <div class="d-grid gap-2 col-6 mx-auto pt-3">
          <button type="submit" class="btn btn-primary">
            <i class="bi bi-plus-circle"></i> Register
          </button>
          <button type="reset" class="btn btn-warning">
            <i class="bi bi-arrow-counterclockwise"></i> Reset
          </button>
        </div>
      </center>
  
    </div>
  </form>



</div>


<div class="container pt-3">
  <table class="table table-striped table-hover table-bordered">
    <thead class="thead-dark">
      <tr>
        <th>Id</th>
        <th>Serial Number</th>
        <th>Model</th>
        <th>Weight Limit</th>
        <th>Battery Capacity</th>
        <th>State</th>
        <th><center>Operations</center></th>
      </tr>
    </thead>
    <tbody>
      {% for drone in drones %}
      <tr>
        <td><center>{{ drone[0] }}</center></td>
        <td>{{ drone[1] }}</td>
        <td>{{ drone[2] }}</td>
        <td>{{ drone[3] }}</td>
        <td>{{ drone[4] }}</td>
        <td>{{ drone[5] }}</td>
        <td>
          <a href="/edit_drone/{{ drone[0] }}" class="btn btn-secondary">
            <i class="bi bi-pencil-fill"></i>
            Edit
          </a>
          <a href="/delete_drone/{{ drone[0] }}" class="btn btn-danger">
            <i class="bi bi-trash-fill"></i>
            Delete
          </a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

</div>

{% endblock %}
